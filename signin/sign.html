<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Register</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="sign.css">

  </head>
  <body>
    <h1><center>Student Registration</center></h1>
    <div class="container ">
      <div class="row justify-content-center">
        <div class="col-md-4 bg-white rounded" style="opacity:0.9">
    <form>
      <div class="sm-6">
        <label for="exampleInputEmail1" class="form-label"></label>
        <input type="text" name="name" id="name"placeholder="Name" class="form-control" aria-describedby="emailHelp" required>
      </div>
      <div class="lg-6">
        <label for="exampleInputEmail1" class="form-label"></label>
        <input type="number" class="form-control" name="Register NO" placeholder="Register No" id="reg" aria-describedby="emailHelp" required>
      </div>
      <div class="lg-6">
  
        <label for="exampleInputEmail1" class="form-label"></label>
      <select class="form-select" aria-label="Default select example" id="course" required>
        <option value="">Choose Course</option>
        <option value="BE">B.E.</option>
              <option value="ME">M.E.</option>
              
              
    </select>
    </div>
      
      <div class="lg-6">
  
        <label for="exampleInputEmail1" class="form-label"></label>
      <select class="form-select" aria-label="Default select example" id='year'required>
        <option value="">Select Year of Study</option>
        <option value="I">I</option>
              <option value="II">II</option>
              <option value="III">III</option>
              <option value="IV">IV</option>
              
    </select>
    </div>
      <div class="lg-6">
        <label for="exampleInputEmail1" class="form-label"></label>
        <input type="date" class="form-control" name="dob" placeholder="Date of Birth" id="dob" aria-describedby="emailHelp"required>
      </div>
  <div class="lg-6">
  
    <label for="exampleInputEmail1" class="form-label"></label>
  <select class="form-select" aria-label="Default select example" id="dept"required >
    <option value="">Select a department</option>
<option value="Computer Science and Engineering">Computer Science and Engineering</option>
          <option value="Electronics and Communication Engineering">Electronics and Communication Engineering</option>
          <option value="Mechanical Engineering">Mechanical Engineering</option>
          <option value="Electrical and Electronics Engineering">Electrical and Electronics Engineering</option>
          <option value="Electronics and Instrumentation Engineering">Electronics and Instrumentation Engineering</option>
          <option value="Industrial Bio-technology">Industrial Bio-technology</option>
          <option value="Information Technology">Information Technology</option>
</select>
</div>
   
      <div class="lg-6">
        <label for="exampleInputEmail1" class="form-label"></label>
        <input type="email" class="form-control" name="email" placeholder="Email" id="email" aria-describedby="emailHelp"required>
      </div>
      <div class="lg-6">
        <label for="exampleInputEmail1" class="form-label"></label>
        <input type="password" class="form-control" name="password" placeholder="Create Password" id="password" aria-describedby="emailHelp"required>
      </div>
      <div class="lg-6">
        <label for="exampleInputEmail1" class="form-label"></label>
        <input type="number" class="form-control" name="phone" placeholder="Phone Number" id="phone" aria-describedby="emailHelp"required>

      </div>
    <div class="mb-3">
  <label for="exampleFormControlTextarea1" class="form-label"></label>
  <textarea class="form-control" name="address" placeholder="Address" id="address" rows="3"required></textarea>
  </div>
  <div class="lg-6">
    <label for="exampleInputEmail1" class="form-label"></label>
    <input type="number" class="form-control" name="pincode" placeholder="Pincode" id="pincode" aria-describedby="emailHelp"required>

  </div>


    </form>
    <div>
      <center>
        <button type="submit" class="btn btn-primary px-5 my-2" id="register" onclick="reg()">Submit</button>
  </center>
    </div>
            
  </div>
</div>
</div>
     <input type="hidden" name="_subject" value="New submission!"> 
     <input type="hidden" name="_autoresponse" value="we have received your mail, we will come back to you soon">
     <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
      import { getDatabase,set,ref} from "https://www.gstatic.com/firebasejs/9.21.0/firebase-database.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-analytics.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";
      
      const firebaseConfig = {
      apiKey: "AIzaSyASJjR_I5yBw2BRcb2BofFo3yCTLzGgpFE",
      authDomain: "signin-edf64.firebaseapp.com",
      projectId: "signin-edf64",
      storageBucket: "signin-edf64.appspot.com",
      messagingSenderId: "457157733295",
      appId: "1:457157733295:web:f5f938215c36147bd4dd5a"
      };
      
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database=getDatabase(app);
      const analytics = getAnalytics(app);
      const auth = getAuth();
      console.log(app);
      
      
      
      //----- New Registration code start	  
      document.getElementById("register").addEventListener("click", function() {
        var email =  document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var Name = document.getElementById("name").value;
        var reg = document.getElementById("reg").value;
        var course = document.getElementById("course").value;
        var year= document.getElementById("year").value;
        var dob= document.getElementById("dob").value;
        var dept=document.getElementById("dept").value;
        var phone = document.getElementById("phone").value;
        var address= document.getElementById("address").value;
        var pincode= document.getElementById("pincode").value;
        
        //For new registration
        createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          // Signed in 
          const user = userCredential.user;
          console.log(user);
          set(ref(database,'users/'+ user.uid),{
            name:Name,
            reg:reg,
            course:course,
            year:year,
            dob:dob,
            dept:dept,
            email:email,
            phone:phone,
            address:address,
            pincode:pincode  
          }
          )
          alert("Registration successfully!!");
          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          // ..
          console.log(errorMessage);
          alert(error);
        });		  		  
      });
     
      //----- End
      
      /*//----- Login code start	  
      document.getElementById("login").addEventListener("click", function() {
        var email =  document.getElementById("login_email").value;
        var password = document.getElementById("login_password").value;
      
        signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          // Signed in 
          const user = userCredential.user;
          console.log(user);
          alert(user.email+" Login successfully!!!");
          document.getElementById('logout').style.display = 'block';
          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          console.log(errorMessage);
          alert(errorMessage);
        });		  		  
      });
      //----- End
      
      //----- Logout code start	  
      document.getElementById("logout").addEventListener("click", function() {
        signOut(auth).then(() => {
          // Sign-out successful.
          console.log('Sign-out successful.');
          alert('Sign-out successful.');
          document.getElementById('logout').style.display = 'none';
        }).catch((error) => {
          // An error happened.
          console.log('An error happened.');
        });		  		  
      });*/
      //----- End
      
      </script>

    
  </body>
</html>